{% extends "base.html" %}
{% block content %}

<h2>Welcome, {{ session['user_name'] }} ğŸ‘‹</h2>

<hr>
<link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">


{% if trip %}
<div class="card p-3 shadow-sm mb-4">
    <h4>Upcoming Trip</h4>
    <p><strong>Destination:</strong> {{ trip[2] }}</p>
    <p><strong>Dates:</strong> {{ trip[3] }} to {{ trip[4] }}</p>
</div>
{% else %}
<p>No trip planned yet.</p>
{% endif %}

<h5>Safety Progress</h5>
<div class="progress mb-4">
  <div class="progress-bar bg-success" role="progressbar"
       style="width: {{progress}}%;">
       {{progress}}%
  </div>
</div>

<div class="row">
    <div class="col-md-3">
        <a href="/planner" class="btn btn-outline-primary w-100 mb-2">Create Trip</a>
    </div>
    <div class="col-md-3">
        <a href="/emergency" class="btn btn-outline-danger w-100 mb-2">Emergency Contacts</a>
    </div>
    <div class="col-md-3">
        <a href="/nearby" class="btn btn-outline-warning w-100 mb-2">Nearby Services</a>
    </div>
    <div class="col-md-3">
        <a href="/checklist" class="btn btn-outline-success w-100 mb-2">Safety Checklist</a>
    </div>
</div>
<a href="{{ url_for('nearby') }}">
  <button type="button">Find Nearby Services ğŸ—ºï¸</button>
</a>
<a href="{{ url_for('emergency') }}">
  <button type="button">Emergency Alert ğŸš¨</button>
</a>
<h2>Your Badges</h2>
<div class="badges-container">
    {% if badges %}
        {% for b in badges %}
            <span class="badge">{{ b[0] }}</span>
        {% endfor %}
    {% else %}
        <p>No badges earned yet. Complete tasks to earn badges!</p>
    {% endif %}
</div>

<style>
    .badges-container {
        display: flex;
        flex-wrap: wrap;
        gap: 10px;
        margin-bottom: 20px;
    }
    .badge {
        background: gold;
        color: black;
        padding: 8px 12px;
        border-radius: 8px;
        font-weight: bold;
        box-shadow: 0 2px 5px rgba(0,0,0,0.2);
    }
</style>
<div class="progress-container">
    <div id="progress-bar" class="progress-bar"></div>
    <p id="progress-text">0% Completed</p>
</div>

<script>
function updateProgress(percent) {
    const progressBar = document.getElementById('progress-bar');
    const progressText = document.getElementById('progress-text');
    progressBar.style.width = percent + "%";
    progressText.textContent = percent + "% Completed";
    if (percent === 100) {
        alert("ğŸ‰ Congrats! You completed all tasks! ğŸ‰");
    }
}
</script>

<style>
.progress-container {
    width: 100%;
    background: #eee;
    border-radius: 10px;
    overflow: hidden;
    margin: 10px 0;
}
.progress-bar {
    width: 0%;
    height: 20px;
    background: green;
    text-align: center;
    line-height: 20px;
    color: white;
}
</style>
<a href="{{ url_for('budget') }}">Travel Budget Manager</a>
<a href="{{ url_for('budget', trip_name=trip['name']) }}">Manage Budget</a>






{% endblock %}
